## 抽象工厂设计模式

#### 1. 产品等级结构和产品族

产品结构等级：产品的继承结构，比如抽象产品类时电视机，具体的产品类是海尔电视机、海信电视机，那么抽象电视机和具体品牌电视机之间构成的就是一个产品等级结构。（抽象产品和具体产品）

产品族：产品族指的是同一个工厂生产的位于不同产品等级结构中的一组产品，比如海尔工厂生产的海尔电视机、海尔空调、海尔冰箱，其中海尔电视机位于电视机等级结构，海尔冰箱位于冰箱等级结构，海尔空调位于空调等级结构。（工厂生产出的不同东西）



工厂方法通过引入工厂等级结构解决了简单工厂模式中工厂职责太重的问题，但是每个工厂只能生产一种产品，导致系统中会存在大量的工厂类，势必增加系统开销。此时就需要一个工厂来生产不同产品等级结构的产品



因此抽象工厂和工厂方法**最大的区别**在于：工厂方法模式针对的一个产品等级结构，抽象工厂需要面对多个产品等级结构，有一个工厂等级结构可以负责多个不同产品等级结构中的产品对象的创建。当一个工厂等级结构可以创建出分属于不同产品等级结构的一个产品族中的所有对象时，抽象工厂模式比工厂方法模式更为简单、更为有效。



#### 2. 抽象工厂概述

抽象工厂模式：提供一个创建一系列相关或者相互依赖对象的接口，而无需指定它们的具体类。

模式结构图：

<img src="../assets/抽象工厂设计模式/image-20241227212757405.png" alt="image-20241227212757405" style="zoom:80%;" />

#### 3. 应用实例

<img src="../assets/抽象工厂设计模式/image-20241227213101059.png" alt="image-20241227213101059" style="zoom:67%;" />

经分析得到的设计类图

 <img src="../assets/抽象工厂设计模式/image-20241227213858155.png" alt="image-20241227213858155" style="zoom:67%;" />



#### 4. 开闭原则倾斜性

当要增加**新产品**的时候，就要修改所以工厂类，增加相应create方法，此外还要修改客户端，负责无法生成该产品。

这就是抽象工厂模式的**最大弊端**，在抽象工厂模式中，要**增加新的产品族很简单**，新建一个对应的具体工厂即可，但是**增加新的产品等级结构很困难**，这种性质称为抽象工厂的开闭原则倾斜性。

- **对于新增产品族而言，只要增加具体产品和对应的具体工厂即可，抽象工厂很好的支持开闭原则，已有代码不用做任何修改**
- **对于新增产品等级结构而言，要修改所有的工厂角色，违背了开闭原则。**



#### 5. 优缺点

1. 优点

- 所有的具体工厂都实现了抽象工厂中定义的方法，因此只需改变具体工厂的实例就可以改变整个软件系统的行为。
- 当一个产品族中的多个对象被设计成一起工作时,它能够保证客户端始终只使用同一个产品族中的对象。
- 增加**新的产品族**很方便,无须修改已有系统,**符合开闭原则**

2. 缺点

- 增加新的产品等级结构麻烦,需要对原有系统进行较大的修改,甚至需要修改抽象层代码,这显然会带来较大的不便,违背了开闭原则。



#### 6. 面向对象设计原则

1. **依赖倒置原则 (Dependency Inversion Principle)**

抽象工厂通过定义一组接口，确保客户端代码依赖于抽象（接口或抽象类），而不是具体实现。

2. **开放-封闭原则 (Open-Closed Principle)**

抽象工厂使得系统可以在不修改现有代码的情况下，通过新增具体工厂类和产品类来扩展产品族。

3. **单一职责原则 (Single Responsibility Principle)**

抽象工厂将产品的创建过程与使用过程分离，使得每个工厂类只负责一个特定产品族的创建职责，而不关心其他功能。

4. **里氏替换原则**

抽象工厂和抽象产品可以被具体实现替换，确保产品族的一致性和正确性。



























